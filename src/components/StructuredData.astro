---
/**
 * StructuredData component
 *
 * Renders Schema.org structured data as JSON-LD in the page head.
 * Accepts either a single schema object or an array of schemas.
 *
 * Usage:
 * <StructuredData schema={getPersonSchema('nl')} />
 * <StructuredData schema={[getPersonSchema('nl'), getOrganizationSchema('nl')]} />
 */

interface Props {
  schema: Record<string, unknown> | Record<string, unknown>[];
}

const { schema } = Astro.props;

// If array of schemas, wrap in @graph structure
const structuredData = Array.isArray(schema)
  ? {
      '@context': 'https://schema.org',
      '@graph': schema.map(s => {
        // Remove @context from individual schemas to avoid duplication
        const { '@context': _context, ...rest } = s;
        return rest;
      }),
    }
  : schema;
---

<script
  is:inline
  type="application/ld+json"
  set:html={JSON.stringify(structuredData)}
/>
